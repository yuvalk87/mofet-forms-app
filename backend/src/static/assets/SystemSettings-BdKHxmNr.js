import{r as i,j as e}from"./index-Dll4-el-.js";const E=()=>{const[l,d]=i.useState("dynamic_lists"),[h,y]=i.useState([]),[L,N]=i.useState([]),[b,f]=i.useState(!0),[p,n]=i.useState(null),[v,m]=i.useState(!1),[a,c]=i.useState({name:"",description:"",items:[]}),[x,j]=i.useState("");i.useEffect(()=>{o(),g()},[]);const o=async()=>{try{const s=await fetch("/api/admin/dynamic-lists",{credentials:"include"});if(s.ok){const t=await s.json();y(t.lists||[])}else n("שגיאה בטעינת הרשימות הדינמיות")}catch{n("שגיאה בחיבור לשרת")}},g=async()=>{try{const s=await fetch("/api/admin/approval-chains",{credentials:"include"});if(s.ok){const t=await s.json();N(t.chains||[])}}catch(s){console.error("Error fetching approval chains:",s)}finally{f(!1)}},w=async s=>{s.preventDefault();try{const t=await fetch("/api/admin/dynamic-lists",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)});if(t.ok)m(!1),c({name:"",description:"",items:[]}),o();else{const r=await t.json();n(r.error||"שגיאה ביצירת הרשימה")}}catch{n("שגיאה בחיבור לשרת")}},u=()=>{x.trim()&&(c({...a,items:[...a.items,x.trim()]}),j(""))},k=s=>{c({...a,items:a.items.filter((t,r)=>r!==s)})},C=async s=>{if(window.confirm("האם אתה בטוח שברצונך למחוק רשימה זו?"))try{(await fetch(`/api/admin/dynamic-lists/${s}`,{method:"DELETE",credentials:"include"})).ok?o():n("שגיאה במחיקת הרשימה")}catch{n("שגיאה בחיבור לשרת")}};return b?e.jsx("div",{className:"tech-background min-h-screen",children:e.jsx("div",{className:"p-8 space-y-8 relative z-10",children:e.jsx("div",{className:"icl-card animate-fade-in-up",children:e.jsxs("div",{className:"flex items-center justify-center py-16",children:[e.jsx("div",{className:"loading-spinner mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mr-4",children:"טוען הגדרות מערכת..."})]})})})}):e.jsx("div",{className:"tech-background min-h-screen",children:e.jsxs("div",{className:"p-8 space-y-8 relative z-10",children:[e.jsxs("div",{className:"icl-card animate-fade-in-up",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"הגדרות מערכת"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"ניהול רשימות דינמיות ושרשראות אישור"})]})}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("button",{onClick:()=>d("dynamic_lists"),className:`px-4 py-2 rounded-lg transition-all duration-300 ${l==="dynamic_lists"?"icl-primary-button":"icl-secondary-button"}`,children:"רשימות דינמיות"}),e.jsx("button",{onClick:()=>d("approval_chains"),className:`px-4 py-2 rounded-lg transition-all duration-300 ${l==="approval_chains"?"icl-primary-button":"icl-secondary-button"}`,children:"שרשראות אישור"}),e.jsx("button",{onClick:()=>d("form_templates"),className:`px-4 py-2 rounded-lg transition-all duration-300 ${l==="form_templates"?"icl-primary-button":"icl-secondary-button"}`,children:"תבניות טפסים"})]})]}),p&&e.jsx("div",{className:"icl-card animate-fade-in-up",children:e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-red-500 text-xl ml-3",children:"⚠️"}),e.jsx("p",{className:"text-red-800 font-medium",children:p})]})})}),l==="dynamic_lists"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"icl-card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold gradient-text",children:"רשימות דינמיות"}),e.jsxs("button",{onClick:()=>m(!0),className:"icl-primary-button interactive-element ripple-effect",children:[e.jsx("span",{className:"text-lg ml-2",children:"➕"}),"הוסף רשימה"]})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"רשימות דינמיות מאפשרות לך ליצור אוספי נתונים שניתן להשתמש בהם בטפסים שונים. לדוגמה: רשימת תוכנות, מתקנים, מפעלים וכו'."}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"icl-card max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold gradient-text mb-4",children:"הוסף רשימה דינמית"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"form-input-group",children:[e.jsx("label",{children:"שם הרשימה"}),e.jsx("input",{type:"text",value:a.name,onChange:s=>c({...a,name:s.target.value}),className:"icl-input",placeholder:"לדוגמה: תוכנות, מתקנים, מפעלים",required:!0})]}),e.jsxs("div",{className:"form-input-group",children:[e.jsx("label",{children:"תיאור"}),e.jsx("textarea",{value:a.description,onChange:s=>c({...a,description:s.target.value}),className:"icl-input",rows:"3",placeholder:"תיאור קצר של הרשימה ושימושיה"})]}),e.jsxs("div",{className:"form-input-group",children:[e.jsx("label",{children:"פריטים ברשימה"}),e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:x,onChange:s=>j(s.target.value),className:"icl-input flex-1",placeholder:"הוסף פריט חדש",onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),u())}),e.jsx("button",{type:"button",onClick:u,className:"icl-secondary-button px-4",children:"הוסף"})]}),a.items.length>0&&e.jsx("div",{className:"border rounded-lg p-3 bg-gray-50 max-h-40 overflow-y-auto",children:a.items.map((s,t)=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-sm",children:s}),e.jsx("button",{type:"button",onClick:()=>k(t),className:"text-red-500 hover:text-red-700 text-sm",children:"✕"})]},t))})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"icl-secondary-button flex-1",children:"ביטול"}),e.jsx("button",{type:"submit",className:"icl-primary-button flex-1",children:"צור רשימה"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[h.map((s,t)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50 animate-fade-in-up",style:{animationDelay:`${t*.1}s`},children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description})]}),e.jsx("button",{onClick:()=>C(s.id),className:"text-red-500 hover:text-red-700 text-sm",children:"מחק"})]}),s.items&&s.items.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["פריטים ברשימה (",s.items.length,"):"]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.items.slice(0,10).map((r,S)=>e.jsx("span",{className:"px-2 py-1 bg-white rounded text-xs text-gray-700 border",children:r},S)),s.items.length>10&&e.jsxs("span",{className:"px-2 py-1 bg-gray-200 rounded text-xs text-gray-500",children:["+",s.items.length-10," נוספים"]})]})]})]},s.id)),h.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📋"}),e.jsx("div",{className:"text-gray-500 text-xl mb-6",children:"אין רשימות דינמיות במערכת"}),e.jsx("p",{className:"text-gray-400",children:"צור רשימה ראשונה כדי להתחיל"})]})]})]})}),l==="approval_chains"&&e.jsxs("div",{className:"icl-card",children:[e.jsx("h2",{className:"text-xl font-semibold gradient-text mb-4",children:"שרשראות אישור"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"הגדרת תהליכי אישור עבור סוגי טפסים שונים. כל טופס יכול להיות בעל שרשרת אישור ייחודית."}),e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔄"}),e.jsx("div",{className:"text-gray-500 text-xl mb-6",children:"מודול שרשראות אישור בפיתוח"}),e.jsx("p",{className:"text-gray-400",children:"תכונה זו תהיה זמינה בקרוב עם עורך תרשים זרימה אינטראקטיבי"})]})]}),l==="form_templates"&&e.jsxs("div",{className:"icl-card",children:[e.jsx("h2",{className:"text-xl font-semibold gradient-text mb-4",children:"תבניות טפסים"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ניהול תבניות טפסים וקישור רשימות דינמיות לשדות בטפסים."}),e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📝"}),e.jsx("div",{className:"text-gray-500 text-xl mb-6",children:"מודול תבניות טפסים בפיתוח"}),e.jsx("p",{className:"text-gray-400",children:"תכונה זו תאפשר עריכת טפסים קיימים ויצירת טפסים חדשים"})]})]})]})})};export{E as default};
