import{r as n,j as e}from"./index-Dll4-el-.js";const w=({onFormCreated:u})=>{const[l,m]=n.useState(""),[s,c]=n.useState({}),[b,j]=n.useState([]),[x,p]=n.useState(!1),[h,r]=n.useState(null);n.useEffect(()=>{g()},[]);const g=async()=>{try{const a=await fetch("/api/forms/templates",{credentials:"include"});if(a.ok){const i=await a.json();j(i.templates||[])}}catch(a){console.error("Error fetching templates:",a)}},o=a=>{m(a),c({}),r(null)},t=(a,i)=>{c(d=>({...d,[a]:i}))},v=async a=>{a.preventDefault(),p(!0),r(null);try{const i=await fetch("/api/forms",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({template_type:l,form_data:s})}),d=await i.json();i.ok?(alert("הטופס נוצר בהצלחה!"),u&&u(d.form),m(""),c({})):r(d.error||"שגיאה ביצירת הטופס")}catch{r("שגיאה בחיבור לשרת")}finally{p(!1)}},f=()=>e.jsx("div",{className:"space-y-6 animate-fade-in-up",children:e.jsxs("div",{className:"icl-form-section",children:[e.jsxs("h3",{className:"text-xl font-semibold gradient-text mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl ml-3",children:"📱"}),"טופס בקשת SMS"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"form-input-group animate-slide-in-right animate-delay-100",children:[e.jsx("label",{children:"תאריך"}),e.jsx("input",{type:"date",value:s.date||"",onChange:a=>t("date",a.target.value),className:"icl-input",required:!0})]}),e.jsxs("div",{className:"form-input-group animate-slide-in-left animate-delay-200",children:[e.jsx("label",{children:"מתקן"}),e.jsx("input",{type:"text",value:s.facility||"",onChange:a=>t("facility",a.target.value),className:"icl-input",placeholder:"הכנס שם המתקן...",required:!0})]}),e.jsxs("div",{className:"form-input-group animate-slide-in-right animate-delay-300",children:[e.jsx("label",{children:"נושא"}),e.jsx("input",{type:"text",value:s.subject||"",onChange:a=>t("subject",a.target.value),className:"icl-input",placeholder:"נושא ההודעה...",required:!0})]}),e.jsxs("div",{className:"form-input-group animate-slide-in-left animate-delay-400",children:[e.jsx("label",{children:"שם הודעה"}),e.jsx("input",{type:"text",value:s.message_name||"",onChange:a=>t("message_name",a.target.value),className:"icl-input",placeholder:"שם זיהוי להודעה...",required:!0})]}),e.jsxs("div",{className:"form-input-group md:col-span-2 animate-fade-in-up animate-delay-300",children:[e.jsx("label",{children:"נמענים"}),e.jsx("textarea",{value:s.recipients||"",onChange:a=>t("recipients",a.target.value),rows:4,className:"icl-input",placeholder:"הכנס רשימת נמענים (כל נמען בשורה נפרדת)...",required:!0})]}),e.jsxs("div",{className:"form-input-group md:col-span-2 animate-fade-in-up animate-delay-400",children:[e.jsx("label",{children:"תנאים"}),e.jsx("textarea",{value:s.conditions||"",onChange:a=>t("conditions",a.target.value),rows:3,className:"icl-input",placeholder:"תנאים מיוחדים או הערות נוספות (אופציונלי)..."})]}),e.jsxs("div",{className:"form-input-group animate-slide-in-right animate-delay-300",children:[e.jsx("label",{children:"שם תג"}),e.jsx("input",{type:"text",value:s.tag_name||"",onChange:a=>t("tag_name",a.target.value),className:"icl-input",placeholder:"תג לזיהוי (אופציונלי)..."})]})]})]})}),N=()=>e.jsx("div",{className:"space-y-6 animate-fade-in-up",children:e.jsxs("div",{className:"icl-form-section",children:[e.jsxs("h3",{className:"text-xl font-semibold gradient-text mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl ml-3",children:"💻"}),"טופס בקשת תוכנה"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"form-input-group animate-slide-in-right animate-delay-100",children:[e.jsx("label",{children:"שם התוכנה"}),e.jsx("input",{type:"text",value:s.software_name||"",onChange:a=>t("software_name",a.target.value),className:"icl-input",placeholder:"שם התוכנה המבוקשת...",required:!0})]}),e.jsxs("div",{className:"form-input-group animate-slide-in-left animate-delay-200",children:[e.jsx("label",{children:"גרסה"}),e.jsx("input",{type:"text",value:s.version||"",onChange:a=>t("version",a.target.value),className:"icl-input",placeholder:"גרסת התוכנה...",required:!0})]}),e.jsxs("div",{className:"form-input-group md:col-span-2 animate-fade-in-up animate-delay-300",children:[e.jsx("label",{children:"תיאור הבקשה"}),e.jsx("textarea",{value:s.description||"",onChange:a=>t("description",a.target.value),rows:4,className:"icl-input",placeholder:"תאר את הצורך בתוכנה ואת השימוש המתוכנן...",required:!0})]}),e.jsxs("div",{className:"form-input-group animate-slide-in-right animate-delay-400",children:[e.jsx("label",{children:"מטרת השימוש"}),e.jsx("input",{type:"text",value:s.purpose||"",onChange:a=>t("purpose",a.target.value),className:"icl-input",placeholder:"למה נדרשת התוכנה...",required:!0})]}),e.jsxs("div",{className:"form-input-group animate-slide-in-left animate-delay-400",children:[e.jsx("label",{children:"עדיפות"}),e.jsxs("select",{value:s.priority||"",onChange:a=>t("priority",a.target.value),className:"icl-input",children:[e.jsx("option",{value:"",children:"בחר עדיפות"}),e.jsx("option",{value:"low",children:"נמוכה"}),e.jsx("option",{value:"medium",children:"בינונית"}),e.jsx("option",{value:"high",children:"גבוהה"}),e.jsx("option",{value:"urgent",children:"דחופה"})]})]})]})]})}),y=()=>e.jsx("div",{className:"space-y-6 animate-fade-in-up",children:e.jsxs("div",{className:"icl-form-section",children:[e.jsxs("h3",{className:"text-xl font-semibold gradient-text mb-4 flex items-center",children:[e.jsx("span",{className:"text-2xl ml-3",children:"🏷️"}),"טופס בקשת תגים"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"form-input-group animate-slide-in-right animate-delay-100",children:[e.jsx("label",{children:"סוג תג"}),e.jsxs("select",{value:s.tag_type||"",onChange:a=>t("tag_type",a.target.value),className:"icl-input",required:!0,children:[e.jsx("option",{value:"",children:"בחר סוג תג"}),e.jsx("option",{value:"access",children:"תג גישה"}),e.jsx("option",{value:"identification",children:"תג זיהוי"}),e.jsx("option",{value:"security",children:"תג אבטחה"}),e.jsx("option",{value:"temporary",children:"תג זמני"})]})]}),e.jsxs("div",{className:"form-input-group animate-slide-in-left animate-delay-200",children:[e.jsx("label",{children:"כמות"}),e.jsx("input",{type:"number",value:s.quantity||"",onChange:a=>t("quantity",a.target.value),className:"icl-input",placeholder:"מספר התגים הנדרשים...",min:"1",required:!0})]}),e.jsxs("div",{className:"form-input-group md:col-span-2 animate-fade-in-up animate-delay-300",children:[e.jsx("label",{children:"מטרת השימוש"}),e.jsx("textarea",{value:s.purpose||"",onChange:a=>t("purpose",a.target.value),rows:3,className:"icl-input",placeholder:"תאר את מטרת השימוש בתגים...",required:!0})]}),e.jsxs("div",{className:"form-input-group animate-slide-in-right animate-delay-400",children:[e.jsx("label",{children:"תאריך תחילת שימוש"}),e.jsx("input",{type:"date",value:s.start_date||"",onChange:a=>t("start_date",a.target.value),className:"icl-input"})]}),e.jsxs("div",{className:"form-input-group animate-slide-in-left animate-delay-400",children:[e.jsx("label",{children:"תאריך סיום שימוש"}),e.jsx("input",{type:"date",value:s.end_date||"",onChange:a=>t("end_date",a.target.value),className:"icl-input"})]})]})]})});return e.jsx("div",{className:"create-form-background min-h-screen",children:e.jsx("div",{className:"max-w-4xl mx-auto p-6 relative z-10",children:e.jsxs("div",{className:"icl-card animate-fade-in-up",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold gradient-text mb-2",children:"יצירת טופס חדש"}),e.jsx("p",{className:"text-gray-600",children:"בחר את סוג הטופס והשלם את הפרטים הנדרשים"})]}),h&&e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-6 animate-fade-in-up",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-red-500 text-xl ml-3",children:"⚠️"}),e.jsx("p",{className:"text-red-800 font-medium",children:h})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-700 mb-4",children:"בחר סוג טופס:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:`form-type-card interactive-element animate-slide-in-right animate-delay-100 ${l==="sms"?"selected":""}`,onClick:()=>o("sms"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"📱"}),e.jsx("div",{className:"font-semibold text-lg text-gray-800",children:"בקשת SMS"}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"שליחת הודעות SMS למערכות"})]})}),e.jsx("div",{className:`form-type-card interactive-element animate-fade-in-up animate-delay-200 ${l==="software"?"selected":""}`,onClick:()=>o("software"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"💻"}),e.jsx("div",{className:"font-semibold text-lg text-gray-800",children:"בקשת תוכנה"}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"רישיונות ותוכנות חדשות"})]})}),e.jsx("div",{className:`form-type-card interactive-element animate-slide-in-left animate-delay-300 ${l==="tags"?"selected":""}`,onClick:()=>o("tags"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🏷️"}),e.jsx("div",{className:"font-semibold text-lg text-gray-800",children:"בקשת תגים"}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"תגי גישה וזיהוי"})]})})]})]}),l&&e.jsxs("form",{onSubmit:v,className:"animate-fade-in-up",children:[l==="sms"&&f(),l==="software"&&N(),l==="tags"&&y(),e.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{m(""),c({}),r(null)},className:"icl-secondary-button interactive-element",children:"ביטול"}),e.jsx("button",{type:"submit",disabled:x,className:"icl-primary-button interactive-element disabled:opacity-50 disabled:cursor-not-allowed",children:x?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"loading-spinner w-4 h-4 ml-2"}),"יוצר טופס..."]}):"צור טופס"})]})]})]})})})};export{w as default};
